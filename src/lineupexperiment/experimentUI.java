/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package lineupexperiment;

import java.awt.event.KeyEvent;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.PrintWriter;
import java.io.UnsupportedEncodingException;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Date;
import java.util.logging.Level;
import java.util.logging.Logger;

/**
 *
 * @author Irtiza
 */
public class experimentUI extends javax.swing.JFrame {

    /**
     * Creates new form experimentUI
     */
    private int qCount;
    private File response;
    private final ArrayList<String> taskList;
    PrintWriter writer;
    boolean second;
    long StartT;
    public experimentUI() {
        this.taskList = new ArrayList();
        qCount = 0;
        second = false;
        taskList.add("What is your name?");
        taskList.add("Aleena is a high school student who is looking for a "
                + "university which ranks highly in International staff, "
                + "student staff ratio and employment prospects. Using "
                + "the data provided, which university would you recommend "
                + "for her?");
        taskList.add("Jamshed is a consultant who specialises in improving "
                + "universities’ positions in league tables. He’s working on his "
                + "sales pitch and looking for some data to prove to universities"
                + " that they need his services. "
                + "Which universities would you recommend he approaches and what"
                + " data would you suggest he uses? ");
        taskList.add("Neha is an academic studying university league"
                + " tables and is looking for patterns between attribute scores "
                + "and overall rank of the university. What kind of patterns can"
                + " you see in the data provided that might interest Neha?");
        taskList.add("Salman works for the University ranked 8th "
                + "overall and is looking to see how they can improve their "
                + "rankings in this university league table. Using the data "
                + "provided, what are some obvious attributes that Salman’s "
                + "university could improve in?");
        taskList.add("Please inform the experiment supervisor that you have "
                + "finished.");

        initComponents();
        taskArea.setText(taskList.get(qCount));
        

    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        taskPanel = new javax.swing.JPanel();
        jScrollPane2 = new javax.swing.JScrollPane();
        taskArea = new javax.swing.JTextArea();
        TextPanel = new javax.swing.JPanel();
        jScrollPane1 = new javax.swing.JScrollPane();
        answerText = new javax.swing.JTextArea();
        jButton1 = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        taskPanel.setBorder(javax.swing.BorderFactory.createTitledBorder("Question"));

        taskArea.setColumns(20);
        taskArea.setLineWrap(true);
        taskArea.setRows(5);
        taskArea.setWrapStyleWord(true);
        taskArea.setAutoscrolls(false);
        taskArea.setCursor(new java.awt.Cursor(java.awt.Cursor.TEXT_CURSOR));
        taskArea.setDisabledTextColor(new java.awt.Color(0, 0, 0));
        taskArea.setEnabled(false);
        taskArea.setFocusable(false);
        jScrollPane2.setViewportView(taskArea);

        javax.swing.GroupLayout taskPanelLayout = new javax.swing.GroupLayout(taskPanel);
        taskPanel.setLayout(taskPanelLayout);
        taskPanelLayout.setHorizontalGroup(
            taskPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jScrollPane2)
        );
        taskPanelLayout.setVerticalGroup(
            taskPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jScrollPane2, javax.swing.GroupLayout.DEFAULT_SIZE, 207, Short.MAX_VALUE)
        );

        TextPanel.setBorder(javax.swing.BorderFactory.createTitledBorder("Answer"));

        answerText.setColumns(20);
        answerText.setRows(5);
        answerText.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                answerTextKeyPressed(evt);
            }
        });
        jScrollPane1.setViewportView(answerText);

        jButton1.setText("Next Task");
        jButton1.setFocusable(false);
        jButton1.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                nextTaskClicked(evt);
            }
        });

        javax.swing.GroupLayout TextPanelLayout = new javax.swing.GroupLayout(TextPanel);
        TextPanel.setLayout(TextPanelLayout);
        TextPanelLayout.setHorizontalGroup(
            TextPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jScrollPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 583, Short.MAX_VALUE)
            .addGroup(TextPanelLayout.createSequentialGroup()
                .addGap(0, 0, Short.MAX_VALUE)
                .addComponent(jButton1))
        );
        TextPanelLayout.setVerticalGroup(
            TextPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(TextPanelLayout.createSequentialGroup()
                .addComponent(jScrollPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 237, Short.MAX_VALUE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jButton1, javax.swing.GroupLayout.PREFERRED_SIZE, 40, javax.swing.GroupLayout.PREFERRED_SIZE))
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(TextPanel, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(taskPanel, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addContainerGap())
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(taskPanel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(18, 18, 18)
                .addComponent(TextPanel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addContainerGap())
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void nextTaskClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_nextTaskClicked
          nextQuestion();
    }//GEN-LAST:event_nextTaskClicked

    private void answerTextKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_answerTextKeyPressed
        if(evt.getKeyCode()==KeyEvent.VK_ENTER){
            evt.consume();
            nextQuestion();
            
        }
    }//GEN-LAST:event_answerTextKeyPressed
    private void nextQuestion(){
        qCount++;
        long endT = System.currentTimeMillis();
        //We've got the name
        switch (qCount) {
            case 1:
                try {
                    Date date = new Date();
                    SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd HH-mm-ss");
                    response = new File(dateFormat.format(date) + answerText.getText() + ".txt");
                    writer = new PrintWriter(response, "UTF-8");
                    
                } catch (FileNotFoundException | UnsupportedEncodingException ex) {
                    Logger.getLogger(experimentUI.class.getName()).log(Level.SEVERE, null, ex);
                }   break;
            case 5:
                //if we've finished all 4 questions
                //if our first time
                if(second==false){
                    second = true;
                    qCount = 1;
                    //switch to second time and write down the last answer/time
                    writer.println(answerText.getText().trim()+"\nTIME TAKEN: "+(endT-StartT)+"ms\n");
                    
                }else{
                    //if our second go around, write down final answer and quit
                    writer.println(answerText.getText().trim()+"\nTIME TAKEN: "+(endT-StartT)+"ms\n");
                    writer.close();
                    System.exit(0);
                }   break;
            default:
                //if it isn't our first or last time
                //write down the answer and time taken
                writer.println(answerText.getText().trim()+"\nTIME TAKEN: "+(endT-StartT)+"ms\n");
                break;
        }
        //move on to next question and clear answer field
        taskArea.setText(taskList.get(qCount));
        StartT = System.currentTimeMillis();
        answerText.setText(null);
        
    }
    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(experimentUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(experimentUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(experimentUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(experimentUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new experimentUI().setVisible(true);
                
            }
        });
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JPanel TextPanel;
    private javax.swing.JTextArea answerText;
    private javax.swing.JButton jButton1;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JScrollPane jScrollPane2;
    private javax.swing.JTextArea taskArea;
    private javax.swing.JPanel taskPanel;
    // End of variables declaration//GEN-END:variables
}
